<!DOCTYPE html>
<html>
<head>
    <title>xdocc, an experimental document compiler</title>
    <link rel="stylesheet" type="text/css" href="..//design/mini-default.css"/>
    <link rel="stylesheet" type="text/css" href="..//design/layout.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<header class="row sticky">
    <label for="doc-drawer-checkbox" class="button drawer-toggle col-sm"></label>
  <a href="../" class="logo col-sm3 col-md"><img style="vertical-align: text-top;" id="logo-small2" src="..//design/xdocc-logo.svg" alt="xdocc"></a>
    <a class="button col-sm col-md" href="..//doc">
        <img style="vertical-align: text-top;" id="logo-small2" src="..//design/doc.svg" alt="doc">
        <span>Documentation</span>
    </a>
    <a class="button col-sm col-md" href="..//cheat-md">
        <img style="vertical-align: text-top;" id="logo-small2" src="..//design/cheat-md.svg" alt="cheat-md">
        <span>Markdown</span>
    </a>
    <a class="button col-sm col-md" href="..//cheat-tx">
        <img style="vertical-align: text-top;" id="logo-small2" src="..//design/cheat-tx.svg" alt="cheat-tx">
        <span>Textile</span>
    </a>
    <a class="button col-sm col-md" href="..//cheat-wi">
        <img style="vertical-align: text-top;" id="logo-small2" src="..//design/cheat-wi.svg" alt="cheat-wi">
        <span>Wiki</span>
    </a>
    <a class="button col-sm col-md" href="..//cheat-fm">
        <img style="vertical-align: text-top;" id="logo-small2" src="..//design/cheat-fm.svg" alt="cheat-fm">
        <span>FreeMarker</span>
    </a>
  <a class="button col-sm col-md" href="https://github.com/xdocc">
      <img style="vertical-align: text-top;" id="logo-small2" src="..//design/github.svg" alt="github">
      <span> GitHub</span>
  </a>
</header>

<div class="container responsive-padding">
  <div class="row">
      <div class="col-sm-10 col-md-10 col-lg-10 fluid">
        <div id="document"><body class="section" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084" alink="#0000FF">
 <div class="NAVHEADER">
  <table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
   <tbody>
    <tr>
     <th colspan="3" align="center"></th>
    </tr>
    <tr>
     <td width="10%" align="left" valign="bottom"><a href="x11700.html" accesskey="P">Prev</a></td>
     <td width="80%" align="center" valign="bottom">Chapter 10. Directive Reference</td>
     <td width="10%" align="right" valign="bottom"><a href="x11905.html" accesskey="N">Next</a></td>
    </tr>
   </tbody>
  </table>
  <hr ALIGN="LEFT" WIDTH="100%">
 </div>
 <div class="section">
  <h1 class="section"><a name="AEN11755">User-defined directive (&lt;@...&gt;)</a></h1> 
  <a></a> 
  <div class="section">
   <h2 class="section"><a name="AEN11760">Synopsis</a></h2> 
   <pre class="programlisting"><tt class="literal">&lt;@<tt class="replaceable"><i>user_def_dir_exp</i></tt> <tt class="replaceable"><i>param1</i></tt>=<tt class="replaceable"><i>val1</i></tt> <tt class="replaceable"><i>param2</i></tt>=<tt class="replaceable"><i>val2</i></tt> <tt class="replaceable"><i>...</i></tt> <tt class="replaceable"><i>paramN</i></tt>=<tt class="replaceable"><i>valN</i></tt>/&gt;</tt>
(Note the XML-style <tt class="literal">/</tt> before the <tt class="literal">&gt;</tt>)
or if you need loop variables (more details...)
<tt class="literal">&lt;@<tt class="replaceable"><i>user_def_dir_exp</i></tt> <tt class="replaceable"><i>param1</i></tt>=<tt class="replaceable"><i>val1</i></tt> <tt class="replaceable"><i>param2</i></tt>=<tt class="replaceable"><i>val2</i></tt> <tt class="replaceable"><i>...</i></tt> <tt class="replaceable"><i>paramN</i></tt>=<tt class="replaceable"><i>valN</i></tt> ; <tt class="replaceable"><i>lv1</i></tt>, <tt class="replaceable"><i>lv2</i></tt>, <tt class="replaceable"><i>...</i></tt>, <tt class="replaceable"><i>lvN</i></tt>/&gt;</tt>

Or the same as the above two but with end-tag (more details...):

<tt class="literal">&lt;@<tt class="replaceable"><i>user_def_dir_exp</i></tt> <tt class="replaceable"><i>...</i></tt>&gt;
  ...
&lt;/@<tt class="replaceable"><i>user_def_dir_exp</i></tt>&gt;</tt>
or
<tt class="literal">&lt;@<tt class="replaceable"><i>user_def_dir_exp</i></tt> <tt class="replaceable"><i>...</i></tt>&gt;
  ...
&lt;/@&gt;</tt>

Or all above but with positional parameter passing (more details...):

<tt class="literal">&lt;@<tt class="replaceable"><i>user</i></tt> <tt class="replaceable"><i>val1</i></tt>, <tt class="replaceable"><i>val2</i></tt>, <tt class="replaceable"><i>...</i></tt>, <tt class="replaceable"><i>valN</i></tt>/&gt;</tt>
...etc.
</pre> 
   <p>Where:</p> 
   <p></p>
   <ul compact="COMPACT">
    <li> <p><tt class="literal"><tt class="replaceable"><i>user_def_dir_exp</i></tt></tt>: Expression evaluates to an user-defined directive (for example a macro), that will be called.</p> </li>
    <li> <p><tt class="literal"><tt class="replaceable"><i>param1</i></tt></tt>, <tt class="literal"><tt class="replaceable"><i>param2</i></tt></tt>, ...etc.: The name of parameters. They are <span class="emphasis"><i class="emphasis">not</i></span> expressions.</p> </li>
    <li> <p><tt class="literal"><tt class="replaceable"><i>val1</i></tt></tt>, <tt class="literal"><tt class="replaceable"><i>val2</i></tt></tt>, ...etc.: The value of parameters. They <span class="emphasis"><i class="emphasis">are</i></span> expressions.</p> </li>
    <li> <p><tt class="literal"><tt class="replaceable"><i>lv1</i></tt></tt>, <tt class="literal"><tt class="replaceable"><i>lv2</i></tt></tt>, ...etc.: The name of loop variables. They are <span class="emphasis"><i class="emphasis">not</i></span> expressions.</p> </li>
   </ul> 
   <p>The number of parameters can be 0 (i.e. no parameters).</p> 
   <p>The order of parameters is not significant (unless you use positional parameter passing). The name of parameters must be unique. Lower- and uppercase letters are considered as different letters in parameter names (i.e. <tt class="literal">Color</tt> and <tt class="literal">color</tt> is not the same).</p> 
  </div> 
  <div class="section">
   <h2 class="section"><a name="AEN11835">Description</a></h2> 
   <p>This will call an user-defined directive, for example a macro. The meaning of parameters, and the set of supported and required parameters depend on the concrete user-defined directive.</p> 
   <p>You may read the tutorial about user-defined directives.</p> 
   <p>Example 1: Calls the directive that is stored in the variable <tt class="literal">html_escape</tt>:</p> 
   <pre class="programlisting">&lt;@html_escape&gt;
  a &lt; b
  Romeo &amp; Juliet
&lt;/@html_escape&gt;</pre> 
   <p>Output:</p> 
   <pre class="programlisting">  a &amp;lt; b
  Romeo &amp;amp; Juliet</pre> 
   <p>Example 2: Calls a macro with parameters:</p> 
   <pre class="programlisting">&lt;@list items=["mouse", "elephant", "python"] title="Animals"/&gt;
<tt class="replaceable"><i>...</i></tt>
&lt;#macro list title items&gt;
  &lt;p&gt;${title?cap_first}:
  &lt;ul&gt;
    &lt;#list items as x&gt;
      &lt;li&gt;${x?cap_first}
    &lt;/#list&gt;
  &lt;/ul&gt;
&lt;/#macro&gt;</pre> 
   <p>Output:</p> 
   <pre class="programlisting">  &lt;p&gt;Animals:
  &lt;ul&gt;
      &lt;li&gt;Mouse
      &lt;li&gt;Elephant
      &lt;li&gt;Python
  &lt;/ul&gt;

<tt class="replaceable"><i>...</i></tt></pre> 
   <div class="section">
    <h3 class="section"><a name="AEN11851">10.25.2.1. End-tag</a></h3> 
    <p>You can omit the <tt class="literal"><tt class="replaceable"><i>user_def_dir_exp</i></tt></tt> in the end-tag. That is, you can always write <tt class="literal">&lt;/@&gt;</tt> instead of <tt class="literal">&lt;/@<tt class="replaceable"><i>anything</i></tt>&gt;</tt>. This rule is mostly useful when the <tt class="literal"><tt class="replaceable"><i>user_def_dir_exp</i></tt></tt> expression is too complex, because you don't have to repeat the expression in the end-tag. Furthermore, if the expression contains other than simple variable names and dots, you are not allowed to repeat the expression. For example, <tt class="literal">&lt;@a_hash[a_method()]&gt;<tt class="replaceable"><i>...</i></tt>&lt;/@a_hash[a_method()]&gt;</tt> is an error; you must write <tt class="literal">&lt;@a_hash[a_method()]&gt;<tt class="replaceable"><i>...</i></tt>&lt;/@&gt;</tt>. But <tt class="literal">&lt;@a_hash.foo&gt;<tt class="replaceable"><i>...</i></tt>&lt;/@a_hash.foo&gt;</tt> is OK.</p> 
   </div> 
   <div class="section">
    <h3 class="section"><a name="AEN11868">10.25.2.2. Loop variables</a></h3> 
    <p>Some user-defined directives create loop variables (similarly to <tt class="literal">list</tt> directive). As with the predefined directives (as <tt class="literal">list</tt>) the <span class="emphasis"><i class="emphasis">name</i></span> of loop variables is given when you call the directive (as <tt class="literal">foo</tt> in <tt class="literal">&lt;#list foos as foo&gt;<tt class="replaceable"><i>...</i></tt>&lt;/#list&gt;</tt>), while the <span class="emphasis"><i class="emphasis">value</i></span> of the variable is set by the directive itself. In the case of user-defined directives the syntax is that the name of loop variables is given after a semicolon. For example:</p> 
    <pre class="programlisting">&lt;@myRepeatMacro count=4 ; <span class="emphasis"><i class="emphasis">x, last</i></span>&gt;
  ${<span class="emphasis"><i class="emphasis">x</i></span>}. Something... &lt;#if <span class="emphasis"><i class="emphasis">last</i></span>&gt; This was the last!&lt;/#if&gt;
&lt;/@myRepeatMacro&gt;</pre> 
    <p>Note that the number of loop variable created by the user-defined directive and the number of loop variables specified after the semicolon need not match. Say, if you are not interested if the repetition is the last, you can simply write:</p> 
    <pre class="programlisting">&lt;@myRepeatMacro count=4 ; <span class="emphasis"><i class="emphasis">x</i></span>&gt;
  ${<span class="emphasis"><i class="emphasis">x</i></span>}. Something...
&lt;/@myRepeatMacro&gt;</pre> 
    <p>or you can even:</p> 
    <pre class="programlisting">&lt;@myRepeatMacro count=4&gt;
  Something...
&lt;/@myRepeatMacro&gt;</pre> 
    <p>Furthermore, it does not cause error if you specify more loop variables after the semicolon than the user-defined directive creates, just the last few loop variables will not be created (i.e. those will be undefined in the nested content). Trying to use the undefined loop variables, however, will cause error (unless you use built-ins like <tt class="literal">?default</tt>), since you try to access a non-existing variable.</p> 
    <p>See the the tutorial about user-defined directives for more explanation.</p> 
   </div> 
   <div class="section">
    <h3 class="section"><a name="AEN11892">10.25.2.3. Positional parameter passing</a></h3> 
    <p>Positional parameter passing (as <tt class="literal">&lt;@heading "Preface", 1/&gt;</tt>) is a shorthand form of normal named parameter passing (as <tt class="literal">&lt;@heading title="Preface" level=1/&gt;</tt>), where you omit the parameter name. This shorthand form should be used if a user-defined directive has only one parameter, or if it is easy to remember the order of parameters for a frequently used user-defined directive. To use this form, you have to know the order in which the named parameters are declared (trivial if the directive has only one parameter). Say, if <tt class="literal">heading</tt> was created as <tt class="literal">&lt;#macro heading title level&gt;<tt class="replaceable"><i>...</i></tt></tt>, then <tt class="literal">&lt;@heading "Preface", 1/&gt;</tt> is equivalent with <tt class="literal">&lt;@heading title="Preface" level=1/&gt;</tt> (or <tt class="literal">&lt;@heading level=1 title="Preface"/&gt;</tt>; if you use parameter names, the order is not important). Note that positional parameter passing is currently only supported for macros.</p> 
   </div> 
  </div> 
 </div>
 <div class="NAVFOOTER">
  <hr ALIGN="LEFT" WIDTH="100%">
  <table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
   <tbody>
    <tr>
     <td width="33%" align="left" valign="top"><a href="x11700.html" accesskey="P">Prev</a></td>
     <td width="34%" align="center" valign="top"><a href="index.html" accesskey="H">Home</a></td>
     <td width="33%" align="right" valign="top"><a href="x11905.html" accesskey="N">Next</a></td>
    </tr>
    <tr>
     <td width="33%" align="left" valign="top">t, lt, rt</td>
     <td width="34%" align="center" valign="top"><a href="c9413.html" accesskey="U">Up</a></td>
     <td width="33%" align="right" valign="top">visit, recurse, fallback</td>
    </tr>
   </tbody>
  </table>
 </div>
</body></div>
      </div>
  </div>
</div>

<footer>
    <p></p>
</footer>
</body>
</html>